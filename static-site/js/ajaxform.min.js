/* SCWW W4U minified ajaxform.js | non minified version on server */
function ajaxFormClearInputs(a){$(a).find("*[name]").each(function(a){ajaxFormSetElementValue(this,$(this).is("[data-form-default]")?$(this).attr("data-form-default"):"")});var b=$(a).attr("id")+"ClearInputs";void 0!==b&&$.isFunction(window[b])&&(formData=window[b](a)),$(a).trigger("ajaxFormClearInputs")}function ajaxFormGetData(a){var b=new FormData;if($(a).is("[data-form-ajax-data]")){$(a).attr("data-form-ajax-data").split("&").forEach(function(a){var c=a.toString().split("=");b.append(c[0],c[1])})}$(a).find("*[name]").each(function(a){var c=ajaxFormGetElementValue($(this));null!==c&&b.append($(this).attr("name"),c)});var d=$(a).attr("id")+"GetData";return void 0!==d&&$.isFunction(window[d])&&(b=window[d](a,b)),b}function ajaxFormGetElementValue(a){return-1!==$.inArray($(a).prop("nodeName"),["INPUT","SELECT","TEXTAREA"])?"checkbox"==$(a).attr("type")||"radio"==$(a).attr("type")?void 0!==$(a).attr("value")&&!1!==$(a).attr("value")?$(a).prop("checked")?$(a).attr("value"):null:$(a).prop("checked")?1:0:"file"==$(a).attr("type")?$(a)[0].files[0]:$(a).val():void 0!==$(a).attr("value")&&!1!==$(a).attr("value")?$(a).attr("value"):$(this).val()}function ajaxFormSetElementValue(a,b){"checkbox"==$(a).attr("type")||"radio"==$(a).attr("type")?$(a).prop("checked",b>0):"OPTION"==$(a).prop("nodeName")?$(a).prop("selected",b>0):$(a).val(b)}function ajaxFormShowAlertMessage(a,b,c){c=void 0!==c&&c,c?$("*[data-form-ajax-alerts]").append('<div class="ajax-alert alert callout" data-closable><i class="fa fa-exclamation-circle" aria-hidden="true"></i> '+b+'<button class="close-button" aria-label="Dismiss alert" type="button" data-close><span aria-hidden="true">&times;</span></button></div>'):$("*[data-form-ajax-alerts]").append('<div class="ajax-alert alert callout"><i class="fa fa-exclamation-circle" aria-hidden="true"></i> '+b+"</div>"),$("html, body").animate({scrollTop:0},"slow"),$("#alerts").foundation()}function ajaxFormShowSuccessMessage(a,b,c){c=void 0!==c&&c,c?$("*[data-form-ajax-alerts]").append('<div class="ajax-alert success callout" data-closable><i class="fa fa-check" aria-hidden="true"></i> '+b+'<button class="close-button" aria-label="Dismiss alert" type="button" data-close><span aria-hidden="true">&times;</span></button></div>'):$("*[data-form-ajax-alerts]").append('<div class="ajax-alert success callout"><i class="fa fa-check" aria-hidden="true"></i> '+b+"</div>"),$("html, body").animate({scrollTop:0},"slow"),$("#alerts").foundation()}function ajaxFormShowModal(a){if($(a).is("data-form-modal")){var b=$(a).is("[data-form-modal-title]")?$(a).attr("data-form-modal-title"):"Please Wait...",c=$(a).is("[data-form-modal-text]")?$(a).attr("data-form-modal-text"):"";"undefined"!=typeof showModal&&$.isFunction(showModal)&&showModal(b,c,!1,!1)}}function ajaxFormSubmit(a){formData=ajaxFormGetData(a),$(a).find(".button").addClass("disabled"),$("*[data-form-ajax-alerts] .ajax-alert").remove(),$(a).find(".form-error").remove(),$(a).find(".is-invalid-input").removeClass("is-invalid-input"),ajaxFormShowModal(a),$.ajax({url:$(a).attr("action"),type:"POST",async:!0,data:formData,dataType:"json",headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,success:function(b){if(console.log(b),$('meta[name="csrf-token"]').attr("content",b.csrf_token),0==b.cartCount?$(".cartLink").html("Cart"):b.cartCount>0&&$(".cartLink").html("Cart ("+b.cartCount+")"),1==b.success){$(a).trigger("ajaxFormSuccess"),b.reload||$(a).is("[data-form-ajax-reload]")?location.reload():$(a).is("[data-form-ajax-redirect]")?window.location=$(a).attr("data-form-ajax-redirect"):"redirect"in b?window.location=b.redirect:b.message&&(ajaxFormShowSuccessMessage(a,b.message,!0),$("html, body").animate({scrollTop:0},"slow")),(b.clear||$(a).is("[data-form-ajax-clear]"))&&ajaxFormClearInputs(a);var c=$(a).attr("id")+"Success";void 0!==c&&$.isFunction(window[c])&&(formData=window[c](a,formData,b))}else{if($(a).trigger("ajaxFormFailure"),$.isPlainObject(b.errors)){var d=[],e="<ul>";$.each(b.errors,function(b,c){$(a).find("*[name='"+b+"']").addClass("is-invalid-input"),$(a).find("*[name='"+b+"']").after('<span class="form-error is-visible"><i class="fa fa-arrow-up" aria-hidden="true"></i> '+c+"</span>"),$(a).find("*[name='"+b+"']").parents(".field").first().addClass("error"),d.push(c),e=e+"<li>"+c+"</li>"}),e+="</ul>",1==d.length?ajaxFormShowAlertMessage(a,"<strong>"+d[0]+"</stong>",!0):ajaxFormShowAlertMessage(a,"<strong>Please correct the following errors:</strong>"+e,!0)}else b.message&&(ajaxFormShowAlertMessage(a,b.message,!0),$("html, body").animate({scrollTop:0},"slow"));hideModal(),$(a).find(".button").removeClass("disabled"),$(a).find("button[type=submit]").removeClass("loading"),$("html, body").animate({scrollTop:0},"fast")}},error:function(b,c,d){ajaxFormShowAlertMessage(a,"<strong>An error occurred: "+d+"</strong>",!0),hideModal()},statusCode:{404:function(){ajaxFormShowAlertMessage(a,"<strong>An error occurred: 404 Page Not Found</strong>",!0),hideModal()}},complete:function(){$(a).find(".button").removeClass("disabled"),$(a).trigger("ajaxFormComplete"),$("#globalModal").foundation("close"),$("#globalDismissableModal").foundation("close"),setFirstFocus()}})}$(document).ready(function(){$("body").on("click","*[data-form-ajax-submit]",function(a){a.preventDefault(),$($(this).attr("data-form-ajax-submit")).submit()}),$("body").on("click","*[data-form-ajax-button]",function(a){a.preventDefault(),ajaxFormSubmit(this)}),$("body").on("submit","*[data-form-ajax]",function(a){a.preventDefault(),ajaxFormSubmit(this)})});